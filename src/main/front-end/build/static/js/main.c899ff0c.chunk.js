(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{205:function(e,t,a){e.exports=a(357)},210:function(e,t,a){},219:function(e,t){},221:function(e,t){},235:function(e,t){},237:function(e,t){},265:function(e,t){},267:function(e,t){},268:function(e,t){},274:function(e,t){},276:function(e,t){},294:function(e,t){},297:function(e,t){},313:function(e,t){},316:function(e,t){},336:function(e,t,a){},357:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(43),c=a.n(l),o=(a(210),a(16)),i=a(17),s=a(19),u=a(18),m=a(190),g=a.n(m),h=a(38),f=a(13),E=a(393),d=a(101),p=a(53),v=a.n(p),b="en-US",N="pl-PL",I=new v.a,j=a(215),A=function(){var e=I.get("jwt");return null!=e?{Authorization:"Bearer "+e,lang:y()}:{lang:y()}},w=function(){var e=I.get("jwt");return null!=e?j.decode(e).sub:""},C=function(){var e=I.get("jwt");return null!=e?j.decode(e).roles:""},O=function(){var e=C();if(e){if(e.includes("ADMIN"))return"ADMIN";if(e.includes("MANAGER"))return"MANAGER";if(e.includes("CLIENT"))return"CLIENT"}},k=function(){var e=sessionStorage.getItem("role");return S("ADMIN")==e?"ADMIN":S("MANAGER")==e?"MANAGER":S("CLIENT")==e?"CLIENT":void 0},L=function(){return"en"===localStorage.getItem("lang")?b:N},y=function(){return L().substring(0,2)},S=function(e){return a(333)(e)},D=function(e){var t=e.component,a=e.accessLevels,n=Object(d.a)(e,["component","accessLevels"]);return r.a.createElement(f.b,Object.assign({},n,{render:function(e){return""!==w()&&a.includes(k())?r.a.createElement(t,e):r.a.createElement(f.a,{to:"/accessDenied"})}}))},M=function(e){var t=e.component,a=Object(d.a)(e,["component"]);return r.a.createElement(f.b,Object.assign({},a,{render:function(e){return""===w()?r.a.createElement(t,e):r.a.createElement(f.a,{to:"/"})}}))},R=a(54),P=a.n(R),F=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){if("swal1"in localStorage){var e=[localStorage.getItem("swal1"),localStorage.getItem("swal2")];P.a.fire({icon:"success",html:e.join("<br>"),position:"top-right",timer:2500,showConfirmButton:!1}).then((function(){localStorage.removeItem("swal1"),localStorage.removeItem("swal2")}))}}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"HOME PAGE"))}}]),a}(n.Component),G=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"PAGE NOT FOUND"))}}]),a}(n.Component),T=a(397),U=a(394),z=a(395),x=(a(336),a(123)),B=a(383),W=function(e){return r.a.createElement(B.a,{id:e})},H=r.a.createContext({role:O(),setRole:function(){}}),J=a(59),K=a(33),Z=a.n(K),Y=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).logout=function(){n.cookies.remove("jwt")},n.guestNavbar=function(){if(""===w())return r.a.createElement(T.a,{className:"ml-auto"},r.a.createElement(T.a.Item,null,r.a.createElement(T.a.Link,{as:h.b,to:"/login"},W("login"))),r.a.createElement(T.a.Item,null,r.a.createElement(T.a.Link,{as:h.b,to:"/register"},W("register"))))},n.clientNavbar=function(e){if("CLIENT"===e)return r.a.createElement(T.a,{className:"ml-auto"},r.a.createElement(T.a.Item,null,r.a.createElement(T.a.Link,null,"client page")))},n.managerNavbar=function(e){if("MANAGER"===e)return r.a.createElement(T.a,{className:"ml-auto"},r.a.createElement(T.a.Item,null,r.a.createElement(T.a.Link,null,"manager page")))},n.adminNavbar=function(e){if("ADMIN"===e)return r.a.createElement(T.a,{className:"ml-auto"},r.a.createElement(T.a.Item,null,r.a.createElement(J.a,{as:h.b,to:"/listAccounts"},W("listAccounts"))))},n.accessLevelNavbar=function(e){if(""!==w()&&C().length>1)return r.a.createElement(T.a,{className:"ml-auto"},r.a.createElement(U.a,{alignRight:!0,title:r.a.createElement("span",null,r.a.createElement(x.a,{className:"navIcons"})," ",W(e))},C().includes("ADMIN")?r.a.createElement(U.a.Item,{onClick:function(){return n.changeRole("ADMIN")}},W("admin")):null,C().includes("MANAGER")?r.a.createElement(U.a.Item,{onClick:function(){return n.changeRole("MANAGER")}},W("manager")):null,C().includes("CLIENT")?r.a.createElement(U.a.Item,{onClick:function(){return n.changeRole("CLIENT")}},W("client")):null))},n.changeRole=function(e){sessionStorage.setItem("role",S(e)),window.location.replace("/")},n.usernameNavbar=function(){if(""!==w())return r.a.createElement(T.a,{className:"ml-auto"},r.a.createElement(U.a,{alignRight:!0,title:r.a.createElement("span",null,r.a.createElement(x.b,{className:"navIcons"})," ",w())},r.a.createElement(U.a.Item,null,"profil placeholder"),r.a.createElement(U.a.Item,null,"haslo placeholder")))},n.languageNavbar=function(){return r.a.createElement(T.a,{className:"ml-auto"},r.a.createElement(U.a,{title:W(L())},r.a.createElement(U.a.Item,{disabled:!0},W("chooseLanguage")),r.a.createElement(U.a.Item,{onClick:function(){return n.changeLanguage("pl")}},"Polski"),r.a.createElement(U.a.Item,{onClick:function(){return n.changeLanguage("en")}},"English")))},n.changeLanguage=function(e){localStorage.setItem("lang",e),w()&&Z.a.put("/language/"+w(),null,{headers:A()}).catch((function(){console.log("ERROR: Account not found")})),window.location.reload()},n.logoutNavbar=function(){if(""!==w())return r.a.createElement(T.a,{className:"ml-auto"},r.a.createElement(T.a.Item,null,r.a.createElement(T.a.Link,{href:"/",onClick:n.logout},W("logout"))))},n.cookies=new v.a,n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(H.Consumer,null,(function(t){var a=t.role;return r.a.createElement(z.a,{expand:"lg"},r.a.createElement(z.a.Brand,{as:h.b,to:"/"},"BOORGER"),r.a.createElement(z.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(z.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(T.a,{className:"ml-auto"},e.clientNavbar(a),e.managerNavbar(a),e.adminNavbar(a),e.accessLevelNavbar(a),e.usernameNavbar(),e.languageNavbar(),e.guestNavbar(),e.logoutNavbar())))}))}}]),a}(n.Component),q=a(48),Q=a(384),V=a(398),X=a(399),$=a(196),_=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).emptyUser={login:"",password:"",language:navigator.language},n.handleFieldChanged=function(e,t){var a=Object(q.a)({},n.state.user);a[t]=e.target.value,n.setState({user:a})},n.reload=function(){window.location.reload()},n.login=function(e){e.preventDefault(),Z.a.post("/login",n.state.user).then((function(e){e.data.token&&(n.cookies.set("jwt",e.data.token,{path:"/"}),localStorage.setItem("swal1",e.data.messages[0]),localStorage.setItem("swal2",e.data.messages[1]),localStorage.setItem("lang",e.data.language),sessionStorage.setItem("role",S(O())),n.props.history.push("/"),window.location.reload())})).catch((function(e){P.a.fire({icon:"error",title:e.response.data}).then((function(){return n.setState({user:n.emptyUser})}))}))},n.state={user:n.emptyUser},n.cookies=new v.a,n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement(Q.a,null,r.a.createElement(V.a,null,W("username")),r.a.createElement(X.a,{autoFocus:!0,value:this.state.user.login,onChange:function(t){return e.handleFieldChanged(t,"login")}})),r.a.createElement(Q.a,null,r.a.createElement(V.a,null,W("password")),r.a.createElement(X.a,{type:"password",value:this.state.user.password,onChange:function(t){return e.handleFieldChanged(t,"password")}})),r.a.createElement($.a,{type:"submit",onClick:this.login},W("confirm"))))}}]),a}(n.Component),ee=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).emptyUser={login:"",password:"",confirmPassword:"",firstname:"",lastname:"",email:"",language:localStorage.getItem("lang")?localStorage.getItem("lang"):navigator.language},n.handleFieldChanged=function(e,t){var a=Object(q.a)({},n.state.user);a[t]=e.target.value,n.setState({user:a})},n.register=function(e){e.preventDefault(),Z.a.post("/register",n.state.user,{headers:A()}).then((function(){n.props.history.push("/")})).catch((function(e){P.a.fire({icon:"error",title:e.response.data})}))},n.state={user:n.emptyUser},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",null,r.a.createElement(Q.a,null,r.a.createElement(V.a,null,W("username")),r.a.createElement(X.a,{autoFocus:!0,value:this.state.user.login,onChange:function(t){return e.handleFieldChanged(t,"login")}})),r.a.createElement(Q.a,null,r.a.createElement(V.a,null,W("password")),r.a.createElement(X.a,{type:"password",value:this.state.user.password,onChange:function(t){return e.handleFieldChanged(t,"password")}})),r.a.createElement(Q.a,null,r.a.createElement(V.a,null,W("password2")),r.a.createElement(X.a,{type:"password",value:this.state.user.confirmPassword,onChange:function(t){return e.handleFieldChanged(t,"confirmPassword")}})),r.a.createElement(Q.a,null,r.a.createElement(V.a,null,W("firstname")),r.a.createElement(X.a,{value:this.state.user.firstname,onChange:function(t){return e.handleFieldChanged(t,"firstname")}})),r.a.createElement(Q.a,null,r.a.createElement(V.a,null,W("lastname")),r.a.createElement(X.a,{value:this.state.user.lastname,onChange:function(t){return e.handleFieldChanged(t,"lastname")}})),r.a.createElement(Q.a,null,r.a.createElement(V.a,null,W("email")),r.a.createElement(X.a,{value:this.state.user.email,onChange:function(t){return e.handleFieldChanged(t,"email")}})),r.a.createElement($.a,{type:"submit",onClick:this.register},W("confirm"))))}}]),a}(n.Component),te=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"ACCESS DENIED"))}}]),a}(n.Component),ae=a(385),ne=a(389),re=a(392),le=a(400),ce=a(387),oe=a(390),ie=a(391),se=a(388),ue=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).createData=function(e,t,a,n,r,l,c,o){return{login:e,email:t,firstname:a,lastname:n,active:r,confirmed:l,lastAuthIP:c,lastAuthDate:o}},n.state={users:[{login:"",email:"",firstname:"",lastname:"",active:"",confirmed:"",lastAuthIP:"",lastAuthDate:""}],loaded:!1},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;Z.a.get("/accounts",{headers:A()}).then((function(t){e.setState({users:t.data})})).catch((function(e){console.log("ERROR "+e)})).finally((function(){e.setState({loaded:!0})}))}},{key:"render",value:function(){for(var e=Object(ae.a)({table:{minWidth:600}}),t=[],a=0;a<this.state.users.length;a++)t.push(this.createData(this.state.users[a].login,this.state.users[a].email,this.state.users[a].firstname,this.state.users[a].lastname,this.state.users[a].active.toString(),this.state.users[a].confirmed.toString(),this.state.users[a].lastAuthIP,this.state.users[a].lastAuthDate));return this.state.loaded?r.a.createElement(ce.a,{component:se.a},r.a.createElement(ne.a,{className:e.table,"aria-label":"simple table"},r.a.createElement(oe.a,null,r.a.createElement(ie.a,null,r.a.createElement(le.a,null,W("username")),r.a.createElement(le.a,{align:"right"},W("email")),r.a.createElement(le.a,{align:"right"},W("firstname")),r.a.createElement(le.a,{align:"right"},W("lastname")),r.a.createElement(le.a,{align:"right"},W("active")),r.a.createElement(le.a,{align:"right"},W("confirmed")),r.a.createElement(le.a,{align:"right"},W("lastAuthIP")),r.a.createElement(le.a,{align:"right"},W("lastAuthDate")))),r.a.createElement(re.a,null,t.map((function(e){return r.a.createElement(ie.a,{key:e.login},r.a.createElement(le.a,{component:"th",scope:"row"},e.login),r.a.createElement(le.a,{align:"right"},e.email),r.a.createElement(le.a,{align:"right"},e.firstname),r.a.createElement(le.a,{align:"right"},e.lastname),r.a.createElement(le.a,{align:"right"},W(e.active)),r.a.createElement(le.a,{align:"right"},W(e.confirmed)),r.a.createElement(le.a,{align:"right"},e.lastAuthIP),r.a.createElement(le.a,{align:"right"},e.lastAuthDate))}))))):r.a.createElement("div",null,r.a.createElement("h1",null,"loading"))}}]),a}(n.Component),me=a(396),ge=a(57),he=Object(ge.a)({},b,{confirm:"Confirm",login:"Sign in",register:"Sign up",logout:"Logout",username:"Login",password:"Password",password2:"Repeat password",firstname:"Name",lastname:"Last name",email:"E-mail",admin:"Admin",ADMIN:"Admin",manager:"Manager",MANAGER:"Manager",client:"Client",CLIENT:"Client",listAccounts:"List accounts",active:"Active",confirmed:"Confirmed",lastAuthIP:"Last authentication IP address",lastAuthDate:"Last authentication date",chooseLanguage:"Choose language","en-US":"EN","pl-PL":"PL",true:"Yes",false:"No"}),fe=Object(ge.a)({},N,{confirm:"Zatwierd\u017a",login:"Zaloguj si\u0119",register:"Rejestracja",logout:"Wyloguj",username:"Login",password:"Has\u0142o",password2:"Powt\xf3rz has\u0142o",firstname:"Imi\u0119",lastname:"Nazwisko",email:"E-mail",admin:"Administrator",ADMIN:"Administrator",manager:"Menad\u017cer",MANAGER:"Menad\u017cer",client:"Klient",CLIENT:"Klient",listAccounts:"Lista kont",active:"Aktywny",confirmed:"Potwierdzony",lastAuthIP:"Adres IP ostatniego uwierzytelnienia",lastAuthDate:"Data ostatniego uwierzytelnienia",chooseLanguage:"Wybierz j\u0119zyk","en-US":"EN","pl-PL":"PL",true:"Tak",false:"Nie"}),Ee=Object(q.a)(Object(q.a)({},he),fe),de=function(e){var t=e.children,a=e.locale,l=void 0===a?L():a;return r.a.createElement(me.a,{locale:l,textComponent:n.Fragment,messages:Ee[l]},t)},pe=a(197),ve=a.n(pe),be=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={role:k()},n.cookies=new ve.a,sessionStorage.getItem("role")||n.cookies.remove("jwt"),n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(H.Provider,{value:this.state},r.a.createElement(de,{locale:L()},r.a.createElement(n.Fragment,null,r.a.createElement(h.a,null,r.a.createElement(Y,null),r.a.createElement(E.a,null,r.a.createElement(f.d,null,r.a.createElement(f.b,{exact:!0,path:"/",component:F}),r.a.createElement(M,{path:"/login",component:_}),r.a.createElement(M,{path:"/register",component:ee}),r.a.createElement(D,{path:"/listAccounts",component:ue,accessLevels:["ADMIN"]}),r.a.createElement(f.b,{path:"/accessDenied",component:te}),r.a.createElement(f.b,{component:G})))))))}}]),a}(n.Component),Ne=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(g.a,null,r.a.createElement(be,null))}}]),a}(n.Component);Z.a.defaults.baseURL="http://localhost:8080/boorger",c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ne,null)),document.getElementById("root"))}},[[205,1,2]]]);
//# sourceMappingURL=main.c899ff0c.chunk.js.map